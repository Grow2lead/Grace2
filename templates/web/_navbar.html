{% load static %}
<style>
  :root {
    --rw-bg: #ffffff;
    --rw-border: #e5e7eb;
    --rw-text: #0f172a;
    --rw-muted: #64748b;
    /* Softer, pleasant palette */
    --rw-primary: #22c55e;        /* emerald */
    --rw-primary-dark: #16a34a;
    --rw-success: #22c55e;
  }

  .rw-header { background: var(--rw-bg); border-bottom: 1px solid var(--rw-border); position: sticky; top: 0; z-index: 1000; }
  .rw-navbar { max-width: 1200px; margin: 0 auto; padding: 0.75rem 1rem; display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
  .rw-brand { display: flex; align-items: center; gap: .5rem; text-decoration: none; color: var(--rw-text); font-weight: 800; font-size: 1.125rem; }

  .rw-left, .rw-right { display: flex; align-items: center; gap: .25rem; }
  .rw-nav { display: flex; align-items: center; gap: .25rem; }
  .rw-link { padding: .5rem .75rem; border-radius: .5rem; text-decoration: none; color: var(--rw-muted); font-weight: 500; }
  .rw-link:hover { background: #f1f5f9; color: var(--rw-text); }
  .rw-link.active { background: #ecfdf5; color: var(--rw-primary-dark); font-weight: 600; }

  .rw-cta { background: var(--rw-success); color: #fff; padding: .5rem .75rem; border-radius: .5rem; text-decoration: none; font-weight: 600; box-shadow: 0 2px 6px rgba(34,197,94,0.2); }
  .rw-cta:hover { background: #15803d; box-shadow: 0 4px 10px rgba(34,197,94,0.25); }

  /* Dropdown */
  .rw-dropdown { position: relative; }
  .rw-dropbtn { background: transparent; border: 1px solid var(--rw-border); color: var(--rw-muted); padding: .5rem .75rem; border-radius: .5rem; cursor: pointer; font-weight: 600; }
  .rw-dropbtn:hover { color: var(--rw-primary-dark); border-color: #bbf7d0; background: #f0fdf4; }
  .rw-menu { display: none; position: absolute; top: calc(100% + .5rem); left: 0; min-width: 220px; background: #fff; border: 1px solid var(--rw-border); border-radius: .5rem; box-shadow: 0 10px 20px rgba(0,0,0,.08); padding: .5rem; z-index: 1001; }
  .rw-dropdown:hover .rw-menu { display: block; }
  .rw-dropdown.open .rw-menu { display: block; }
  .rw-menu a { display: block; padding: .5rem .75rem; border-radius: .5rem; text-decoration: none; color: var(--rw-text); font-weight: 500; }
  .rw-menu a:hover { background: #f1f5f9; }

  /* Mobile */
  .rw-mobile-btn { display: none; background: none; border: 1px solid var(--rw-border); padding: .35rem .6rem; border-radius: .5rem; font-size: 1.25rem; color: var(--rw-muted); }
  .rw-mobile { display: none; border-top: 1px solid var(--rw-border); background: #fff; }
  .rw-mobile-inner { max-width: 1200px; margin: 0 auto; padding: .75rem 1rem; display: grid; gap: .5rem; }
  .rw-mobile a, .rw-mobile button { text-align: left; }

  @media (max-width: 900px) {
    .rw-nav, .rw-right { display: none; }
    .rw-mobile-btn { display: inline-flex; }
    .rw-mobile.show { display: block; }
  }
</style>

<header class="rw-header">
  <nav class="rw-navbar">
    <div class="rw-left">
      <a href="{% url 'dashboard' %}" class="rw-brand">üåø <span>RootedWell</span></a>
      <div class="rw-nav">
        <a href="{% url 'dashboard' %}" class="rw-link {% if active == 'dashboard' %}active{% endif %}">Dashboard</a>
        <a href="{% url 'nutrition' %}" class="rw-link {% if active == 'nutrition' %}active{% endif %}">Nutrition</a>
        <a href="{% url 'activity' %}" class="rw-link {% if active == 'activity' %}active{% endif %}">Activity</a>
        <div class="rw-dropdown">
          <button class="rw-dropbtn" type="button" onclick="rwToggleExplore(event)">Explore ‚ñæ</button>
          <div class="rw-menu">
            <a href="{% url 'meals_provider' %}" class="{% if active == 'meals_provider' %}active{% endif %}">üçΩÔ∏è Meals Provider</a>
            <a href="{% url 'fitness_centers' %}" class="{% if active == 'fitness_centers' %}active{% endif %}">üèãÔ∏è Fitness Centers</a>
            <a href="{% url 'challenge_hub' %}" class="{% if active == 'challenge_hub' %}active{% endif %}">üèÜ Challenge Hub</a>
            <a href="{% url 'community_corner' %}" class="{% if active == 'community_corner' %}active{% endif %}">ü§ù Community Corner</a>
          </div>
        </div>
      </div>
    </div>

    <div class="rw-right">
      <a href="{% url 'book_expert' %}" class="rw-cta">Book Expert</a>
      <a href="{% url 'profile' %}" class="rw-link {% if active == 'profile' %}active{% endif %}">Profile</a>
      <a class="rw-link" href="/admin/" target="_blank">Admin</a>
      {% if user.is_authenticated %}
        <a class="rw-link" href="/admin/logout/">Logout</a>
      {% else %}
        <a class="rw-link" href="{% url 'login' %}">Login</a>
      {% endif %}
    </div>

    <button class="rw-mobile-btn" onclick="rwToggleMenu()">‚ò∞</button>
  </nav>

  <div id="rwMobile" class="rw-mobile">
    <div class="rw-mobile-inner">
      <a href="{% url 'dashboard' %}">Dashboard</a>
      <a href="{% url 'nutrition' %}">Nutrition</a>
      <a href="{% url 'activity' %}">Activity</a>
      <details>
        <summary>Explore</summary>
        <div style="display:grid; gap:.25rem; padding:.25rem .75rem;">
          <a href="{% url 'meals_provider' %}">Meals Provider</a>
          <a href="{% url 'fitness_centers' %}">Fitness Centers</a>
          <a href="{% url 'challenge_hub' %}">Challenge Hub</a>
          <a href="{% url 'community_corner' %}">Community Corner</a>
        </div>
      </details>
      <a href="{% url 'book_expert' %}">Book Expert</a>
      <a href="{% url 'profile' %}">Profile</a>
      <a href="/admin/" target="_blank">Admin</a>
      {% if user.is_authenticated %}
        <a href="/admin/logout/">Logout</a>
      {% else %}
        <a href="{% url 'login' %}">Login</a>
      {% endif %}
    </div>
  </div>
</header>

<script>
  function rwToggleMenu() {
    var m = document.getElementById('rwMobile');
    if (m) { m.classList.toggle('show'); }
  }
  // Close mobile menu on outside click
  document.addEventListener('click', function (e) {
    const menu = document.getElementById('rwMobile');
    const btn = document.querySelector('.rw-mobile-btn');
    if (!menu || !btn) return;
    if (!menu.contains(e.target) && !btn.contains(e.target)) {
      menu.classList.remove('show');
    }
  });

  // Explore dropdown click toggle (for touch/click devices)
  function rwToggleExplore(e) {
    e.preventDefault();
    e.stopPropagation();
    var dd = e.currentTarget.closest('.rw-dropdown');
    if (dd) {
      dd.classList.toggle('open');
    }
  }
  // Close explore dropdown on outside click
  document.addEventListener('click', function (e) {
    document.querySelectorAll('.rw-dropdown.open').forEach(function(dd){
      if (!dd.contains(e.target)) dd.classList.remove('open');
    });
  });
  // Close dropdown when a menu link is clicked
  document.querySelectorAll('.rw-menu a').forEach(function(a){
    a.addEventListener('click', function(){
      var parent = a.closest('.rw-dropdown');
      if (parent) parent.classList.remove('open');
    });
  });
</script>


